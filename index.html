<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boon's Adventure: Care Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --main-font: 'Quicksand', sans-serif;
            --box-bg: rgba(0, 0, 0, 0.8);
            --text-color: #fff;
            --highlight: #54f357; 
            --btn-hover: #ff69b4;
        }

        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #333; font-family: var(--main-font); }

        #game-stage {
            position: relative;
            width: 100%;
            height: 100vh;
            background-image: url('bg.png'); /* ƒê·∫£m b·∫£o file t√™n l√† bg.png */
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
        }

        /* --- C·∫§U H√åNH M√àO --- */
        #hero-cat {
            position: absolute;
            /* ƒê·∫©y l√™n cao h∆°n ƒë·ªÉ ƒë·ª©ng tr√™n c·∫ßu (34%) */
            bottom: 34%; 
            left: 5%;
            width: 90px; /* B√© l·∫°i m·ªôt ch√∫t cho c√¢n ƒë·ªëi */
            height: auto;
            transition: left 2.5s linear;
            z-index: 10;
            
            /* D√íNG L·ªÜNH QUAN TR·ªåNG: T·ª± ƒë·ªông x√≥a n·ªÅn ƒëen c·ªßa ·∫£nh m√®o */
            mix-blend-mode: screen; 
        }

        .walking {
            animation: bounce 0.4s infinite alternate;
        }
        @keyframes bounce { 
            from { transform: translateY(0); } 
            to { transform: translateY(-8px); } 
        }

        /* --- H·ªòP THO·∫†I (DESIGN M·ªöI) --- */
        #dialogue-box {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 550px; /* Thu nh·ªè chi·ªÅu r·ªông l·∫°i */
            background: var(--box-bg);
            border: 2px solid rgba(255,255,255,0.3); /* Vi·ªÅn m·ªèng h∆°n */
            padding: 20px;
            color: #fff;
            border-radius: 15px; /* Bo tr√≤n m·ªÅm m·∫°i */
            display: flex;
            flex-direction: column;
            z-index: 100;
            box-shadow: 0 5px 25px rgba(0,0,0,0.5);
            backdrop-filter: blur(5px); /* Hi·ªáu ·ª©ng m·ªù n·ªÅn k√≠nh */
        }

        #speaker { 
            color: var(--highlight); 
            margin-bottom: 8px; 
            font-size: 0.9rem; 
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        #content { 
            font-size: 0.95rem; /* Ch·ªØ to r√µ r√†ng h∆°n pixel */
            line-height: 1.6; 
            margin-bottom: 15px; 
            min-height: 40px; 
        }
        
        .btn-group { display: flex; flex-direction: column; gap: 8px; }
        
        .game-btn {
            background: rgba(255,255,255,0.1); 
            color: #fff; 
            border: 1px solid rgba(255,255,255,0.2);
            padding: 10px 15px; 
            font-family: var(--main-font); 
            font-size: 0.9rem;
            border-radius: 8px;
            cursor: pointer; 
            text-align: left; 
            transition: all 0.2s;
        }
        
        .game-btn:hover { 
            background: var(--btn-hover);
            border-color: var(--btn-hover);
            transform: translateX(5px); /* Hi·ªáu ·ª©ng tr∆∞·ª£t nh·∫π */
        }
        
        .hidden { display: none !important; }

        /* M√†n h√¨nh t·ªïng k·∫øt */
        #summary-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 200;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; text-align: center;
        }
    </style>
</head>
<body>

    <div id="game-stage">
        <img id="hero-cat" src="cat.png" alt="Boon">
        
        <div id="dialogue-box">
            <div id="speaker">BOON REAL COOL</div>
            <div id="content">Loading...</div>
            <div class="btn-group" id="choices"></div>
        </div>

        <div id="summary-screen" class="hidden">
            <h2 style="color: #54f357; margin-bottom: 20px;">MENU CHƒÇM S√ìC ‚ù§Ô∏è</h2>
            <div id="final-menu" style="text-align: left; line-height: 2; border: 1px dashed #fff; padding: 30px; border-radius: 10px; background: rgba(255,255,255,0.05);"></div>
            <p style="margin-top: 30px; color: #ff69b4; font-size: 0.9rem; font-style: italic;">"Ngh·ªâ ng∆°i nh√©, y√™u em nhi·ªÅu!"</p>
        </div>
    </div>

    <script>
        const POSITIONS = {
            START: 5,
            STATION_1: 30, 
            STATION_2: 55, 
            STATION_3: 80, 
            END: 120       
        };

        const cat = document.getElementById('hero-cat');
        const dialogBox = document.getElementById('dialogue-box');
        const contentDiv = document.getElementById('content');
        const choicesDiv = document.getElementById('choices');
        let userMenu = [];

        // --- K·ªäCH B·∫¢N GAME (ƒê√£ update logic ƒÇn v·∫∑t) ---
        const STORY = {
            start: {
                text: "Ch√†o c√¥ng ch√∫a! Boon ƒë√£ s·∫µn s√†ng h·ªô t·ªëng b·∫°n ƒëi t√¨m s·ª± th∆∞ gi√£n ƒë√¢y. ƒêi th√¥i n√†o!",
                choices: [
                    { text: "ƒêi th√¥i Boon ∆°i! üêæ", action: () => walkTo(POSITIONS.STATION_1, 'station1') }
                ]
            },
            
            // --- TR·∫†M 1 ---
            station1: {
                text: "TR·∫†M 1: N·∫†P NƒÇNG L∆Ø·ª¢NG üç≤\nB·ª•ng ƒëang kh√≥ ch·ªãu, b·∫°n mu·ªën d√πng g√¨?",
                choices: [
                    { text: "N∆∞·ªõc ·∫•m (Gi·∫£m ƒëau b·ª•ng)", action: () => saveAndNext("N∆∞·ªõc ·∫•m", POSITIONS.STATION_2, 'station2') },
                    { text: "Hoa qu·∫£ (Vitamin)", action: () => saveAndNext("Hoa qu·∫£", POSITIONS.STATION_2, 'station2') },
                    // L·ª±a ch·ªçn n√†y d·∫´n ƒë·∫øn menu ph·ª• (ƒë·ª©ng y√™n t·∫°i ch·ªó)
                    { text: "ƒÇn v·∫∑t & Socola üç´", action: () => renderDialog('station1_cravings') }
                ]
            },

            // MENU PH·ª§ C·ª¶A ƒÇN V·∫∂T
            station1_cravings: {
                text: "B·∫°n ƒëang th√®m m√≥n g√¨ nh·∫•t n√†o?",
                choices: [
                    { text: "Bim bim Khoai t√¢y", action: () => showBenefit("Bim bim Khoai t√¢y", "Khoai t√¢y gi√≤n r·ª•m, ƒÉn v√†o vui mi·ªáng x·∫£ stress c·ª±c t·ªët! ü•î", POSITIONS.STATION_2, 'station2') },
                    { text: "Snack Lays", action: () => showBenefit("Snack Lays", "L√°t khoai m·ªèng d√≠nh, ƒë·∫≠m ƒë√†, ƒÉn l√† d√≠nh, qu√™n h·∫øt m·ªát m·ªèi! ‚ú®", POSITIONS.STATION_2, 'station2') },
                    { text: "Socola", action: () => showBenefit("Socola", "Socola gi√∫p tƒÉng mood t·ª©c th√¨ v√† Magie gi√∫p gi·∫£m ƒëau b·ª•ng ƒë√≥! üç´", POSITIONS.STATION_2, 'station2') }
                ]
            },

            // --- TR·∫†M 2 ---
            station2: {
                text: "TR·∫†M 2: SPA T·∫†I GIA üõÅ\nƒêi ƒë∆∞·ª£c n·ª≠a ƒë∆∞·ªùng r·ªìi. C∆° th·ªÉ c·∫ßn ƒë∆∞·ª£c v·ªó v·ªÅ, b·∫°n mu·ªën l√†m g√¨?",
                choices: [
                    { text: "Ng√¢m ch√¢n n∆∞·ªõc ·∫•m tr∆∞·ªõc ng·ªß", action: () => saveAndNext("Ng√¢m ch√¢n", POSITIONS.STATION_3, 'station3') },
                    { text: "Skincare t·ªëi gi·∫£n, nh·∫π nh√†ng", action: () => saveAndNext("Skincare", POSITIONS.STATION_3, 'station3') }
                ]
            },

            // --- TR·∫†M 3 ---
            station3: {
                text: "TR·∫†M 3: CHILL TINH TH·∫¶N üéµ\nTr·∫°m cu·ªëi r·ªìi. T·ªëi nay ch·ªët ƒë∆°n ho·∫°t ƒë·ªông g√¨ ƒë√¢y?",
                choices: [
                    { text: "Xem phim c√πng L√¢m (C∆°m ch√≥)", action: () => saveAndNext("Xem phim c√πng L√¢m", POSITIONS.END, 'finish') },
                    { text: "Xem phim m·ªôt m√¨nh (Me time)", action: () => saveAndNext("Xem phim 1 m√¨nh", POSITIONS.END, 'finish') },
                    { text: "ƒê·ªçc truy·ªán tranh & Ng·ªß s·ªõm", action: () => saveAndNext("ƒê·ªçc truy·ªán", POSITIONS.END, 'finish') }
                ]
            },

            // M√†n h√¨nh hi·ªÉn th·ªã l·ª£i √≠ch (D√πng chung)
            benefit_screen: {
                text: "", // S·∫Ω ƒë∆∞·ª£c ƒëi·ªÅn t·ª± ƒë·ªông
                choices: [] 
            }
        };

        // --- H√ÄM X·ª¨ L√ù ---
        
        // H√†m m·ªõi: Hi·ªÉn th·ªã l·ª£i √≠ch xong m·ªõi ƒëi ti·∫øp
        function showBenefit(choice, benefitText, nextPos, nextKey) {
            userMenu.push(choice);
            contentDiv.innerText = benefitText; // Hi·ªán l·ª£i √≠ch
            choicesDiv.innerHTML = ''; // X√≥a n√∫t c≈©
            
            // T·∫°o n√∫t OK ƒë·ªÉ ƒëi ti·∫øp
            const btn = document.createElement('button');
            btn.className = 'game-btn';
            btn.innerText = "Tuy·ªát v·ªùi, ƒëi ti·∫øp th√¥i! ‚ñ∫";
            btn.onclick = () => walkTo(nextPos, nextKey);
            choicesDiv.appendChild(btn);
        }

        function walkTo(targetPercent, nextStoryKey) {
            dialogBox.classList.add('hidden');
            cat.classList.add('walking');
            cat.style.left = targetPercent + '%'; 

            setTimeout(() => {
                cat.classList.remove('walking');
                if (nextStoryKey === 'finish') {
                    showSummary();
                } else {
                    dialogBox.classList.remove('hidden');
                    renderDialog(nextStoryKey);
                }
            }, 2500);
        }

        function saveAndNext(choice, nextPos, nextKey) {
            userMenu.push(choice);
            walkTo(nextPos, nextKey);
        }

        function renderDialog(key) {
            const data = STORY[key];
            contentDiv.innerText = data.text;
            choicesDiv.innerHTML = ''; 

            data.choices.forEach(c => {
                const btn = document.createElement('button');
                btn.className = 'game-btn';
                btn.innerText = c.text;
                btn.onclick = c.action;
                choicesDiv.appendChild(btn);
            });
        }

        function showSummary() {
            document.getElementById('summary-screen').classList.remove('hidden');
            const menuDiv = document.getElementById('final-menu');
            menuDiv.innerHTML = `
                <b>1. ƒÇn u·ªëng:</b> ${userMenu[0]}<br>
                <b>2. Body:</b> ${userMenu[1]}<br>
                <b>3. Spirit:</b> ${userMenu[2]}
            `;
        }

        renderDialog('start');
    </script>
</body>
</html>
