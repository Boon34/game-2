<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boon's Quest: Period Rescue Mission v2</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --pixel-font: 'Press Start 2P', cursive;
            --box-bg: #000000;
            --text-color: #ffffff;
            --highlight-color: #54f357; /* M√†u xanh l√° matrix */
            --benefit-color: #f3ce54;   /* M√†u v√†ng cho l·ª£i √≠ch */
            --guide-color: #54dcf3;     /* M√†u xanh d∆∞∆°ng cho h∆∞·ªõng d·∫´n */
            --border-color: #ffffff;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-color: #333;
            font-family: var(--pixel-font);
        }

        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
            /* ·∫¢nh n·ªÅn c·ªßa b·∫°n */
            background-image: url('image_2.png');
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        /* H·ªôp tho·∫°i */
        #dialogue-box {
            width: 90%; 
            max-width: 1200px;
            margin: 0 auto 30px auto;
            background-color: var(--box-bg);
            border: 4px solid var(--border-color);
            padding: 25px;
            box-sizing: border-box;
            color: var(--text-color);
            min-height: 220px; 
            display: flex;
            flex-direction: column;
        }

        #speaker-name {
            color: var(--highlight-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-transform: uppercase;
        }

        #dialogue-text {
            font-size: 0.9rem;
            line-height: 1.8;
            flex-grow: 1;
            white-space: pre-wrap; /* ƒê·ªÉ nh·∫≠n di·ªán xu·ªëng d√≤ng */
        }

        /* N√∫t b·∫•m */
        #options-container {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .pixel-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-family: var(--pixel-font);
            font-size: 0.85rem;
            text-align: left;
            cursor: pointer;
            padding: 5px 0;
            position: relative;
            padding-left: 25px;
            transition: color 0.2s;
        }

        .pixel-btn:hover {
            color: var(--highlight-color);
        }

        .pixel-btn:hover::before {
            content: ">";
            position: absolute;
            left: 0;
            color: var(--highlight-color);
            animation: blink 0.8s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        /* Style ri√™ng cho ph·∫ßn L·ª£i √≠ch v√† H∆∞·ªõng d·∫´n trong text */
        .benefit-text { color: var(--benefit-color); }
        .guide-text { color: var(--guide-color); }

        @media (max-width: 600px) {
            #speaker-name { font-size: 0.9rem; }
            #dialogue-text { font-size: 0.7rem; }
            .pixel-btn { font-size: 0.65rem; }
            #dialogue-box { padding: 15px; min-height: 250px;}
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="dialogue-box">
            <div id="speaker-name">BOON REAL COOL:</div>
            <div id="dialogue-text">Loading...</div>
            <div id="options-container"></div>
        </div>
    </div>

    <script>
        // --- K·ªäCH B·∫¢N GAME ---
        const storyData = {
            // M·ªü ƒë·∫ßu
            welcome: {
                speaker: "BOON REAL COOL",
                text: "Ch√†o b·∫°n! M√¨nh l√† Boon Real Cool.\nƒêinh V≈© L√¢m ƒë√£ tri·ªáu h·ªìi m√¨nh ƒë·∫øn ƒë√¢y ƒë·ªÉ chƒÉm s√≥c b·∫°n trong nh·ªØng ng√†y 'ƒë√®n ƒë·ªè' kh√≥ ·ªü n√†y.\n\nNhi·ªám v·ª• c·ªßa ch√∫ng ta l√† ƒëi qua 3 tr·∫°m ƒë·ªÉ t√¨m l·∫°i s·ª± tho·∫£i m√°i. S·∫µn s√†ng ch∆∞a?",
                options: [
                    { text: "ƒêi th√¥i Boon ∆°i! üöÄ", nextState: "station1_Intro" }
                ]
            },

            // --- TR·∫†M 1: ƒÇN U·ªêNG ---
            station1_Intro: {
                speaker: "TR·∫†M 1: N·∫†P NƒÇNG L∆Ø·ª¢NG",
                text: "C√°i b·ª•ng ƒëang bi·ªÉu t√¨nh r·ªìi. B·∫°n mu·ªën d√πng m√≥n g√¨ n√†o?",
                options: [
                    { text: "ü•õ M·ªôt c·ªëc n∆∞·ªõc ·∫•m (Basic but Gold)", nextState: "st1_water", saveChoice: true },
                    { text: "üçå Hoa qu·∫£ t·ªët (Chu·ªëi/ƒêu ƒë·ªß...)", nextState: "st1_fruit", saveChoice: true },
                    { text: "üçü ƒêang th√®m ƒÉn v·∫∑t (Bim bim/N∆∞·ªõc ng·ªçt)", nextState: "st1_cravings", saveChoice: true }
                ]
            },
            
            // Chi ti·∫øt Tr·∫°m 1
            st1_water: {
                speaker: "INFO: N∆Ø·ªöC ·∫§M",
                text: "L·ª±a ch·ªçn an to√†n tuy·ªát ƒë·ªëi!\n\n<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> Gi√∫p gi√£n c∆° t·ª≠ cung, gi·∫£m ƒëau b·ª•ng v√† ƒë·∫©y nhanh qu√° tr√¨nh l∆∞u th√¥ng m√°u.",
                options: [{ text: "ƒê√£ u·ªëng xong -> L√†m nhi·ªám v·ª• k·∫ø", nextState: "station1_Task" }]
            },
            st1_fruit: {
                speaker: "INFO: HOA QU·∫¢",
                text: "Healthy qu√° n√®!\n\n<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> Chu·ªëi hay ƒêu ƒë·ªß ch·ª©a nhi·ªÅu Kali v√† Vitamin, gi√∫p gi·∫£m t√≠ch n∆∞·ªõc v√† b·ªõt c·∫£m gi√°c th√®m ng·ªçt linh tinh.",
                options: [{ text: "ƒê√£ mƒÉm xong -> L√†m nhi·ªám v·ª• k·∫ø", nextState: "station1_Task" }]
            },
            st1_cravings: {
                speaker: "INFO: CHEAT MEAL",
                text: "Oke chi·ªÅu chu·ªông b·∫£n th√¢n m·ªôt ch√∫t!\n\n<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> Th·ªèa m√£n c∆°n th√®m v√† gi√∫p t√¢m tr·∫°ng vui v·∫ª l√™n ngay l·∫≠p t·ª©c (Dopamine boost!).\n\n*L∆∞u √Ω: ƒÇn m·ªôt x√≠u th√¥i nh√©, nhi·ªÅu ƒë∆∞·ªùng qu√° s·∫Ω m·ªát th√™m ƒë√≥.*",
                options: [{ text: "ƒê√£ ƒÉn xong (vui v·∫ª) -> L√†m nhi·ªám v·ª• k·∫ø", nextState: "station1_Task" }]
            },

            // Nhi·ªám v·ª• chuy·ªÉn ti·∫øp Tr·∫°m 1
            station1_Task: {
                speaker: "CHECKPOINT 1",
                text: "‚ö†Ô∏è NHI·ªÜM V·ª§: B·∫°n h√£y ho√†n th√†nh vi·ªác ƒÉn/u·ªëng m√≥n v·ª´a ch·ªçn tr∆∞·ªõc khi ch√∫ng ta sang tr·∫°m chƒÉm s√≥c c∆° th·ªÉ nh√©.",
                options: [
                    { text: "ƒê√£ n·∫°p nƒÉng l∆∞·ª£ng xong ‚úÖ -> ƒêi ti·∫øp", nextState: "station2_Intro" }
                ]
            },

            // --- TR·∫†M 2: C∆† TH·ªÇ & SKINCARE ---
            station2_Intro: {
                speaker: "TR·∫†M 2: SPA T·∫†I GIA",
                text: "Gi·ªù l√† l√∫c v·ªó v·ªÅ c∆° th·ªÉ. B·∫°n mu·ªën ch·ªçn li·ªáu tr√¨nh n√†o?",
                options: [
                    { text: "ü¶∂ Ng√¢m ch√¢n n∆∞·ªõc ·∫•m tr∆∞·ªõc khi ng·ªß", nextState: "st2_soak", saveChoice: true },
                    { text: "‚ú® Skincare t·ªëi gi·∫£n (Da ƒëang nh·∫°y c·∫£m)", nextState: "st2_skincare", saveChoice: true }
                ]
            },

            // Chi ti·∫øt Tr·∫°m 2 (K√®m h∆∞·ªõng d·∫´n)
            st2_soak: {
                speaker: "GUIDE: NG√ÇM CH√ÇN",
                text: "<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> D·∫´n h·ªèa h∆∞ ƒëi xu·ªëng, gi√∫p ng·ªß si√™u ngon v√† gi·∫£m ƒëau b·ª•ng hi·ªáu qu·∫£.\n\n<span class='guide-text'>‚òÖ C√ÅCH L√ÄM:</span>\n1. Pha n∆∞·ªõc ·∫•m kho·∫£ng 40 ƒë·ªô (ƒë·ª´ng b·ªèng qu√°).\n2. Ng√¢m 15-20 ph√∫t cho th∆∞ gi√£n.\n3. Lau kh√¥ ch√¢n v√† ƒëi t·∫•t ngay.",
                options: [{ text: "ƒê√£ hi·ªÉu & S·∫Ω l√†m -> Checkpoint", nextState: "station2_Task" }]
            },
            st2_skincare: {
                speaker: "GUIDE: SKINCARE NG√ÄY ƒê√àN ƒê·ªé",
                text: "<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> Gi√∫p da th√¥ng tho√°ng, gi·∫£m ti·∫øt d·∫ßu v√† ngƒÉn ng·ª´a m·ª•n do hormone.\n\n<span class='guide-text'>‚òÖ C√ÅCH L√ÄM:</span>\n1. R·ª≠a m·∫∑t th·∫≠t s·∫°ch (Quan tr·ªçng nh·∫•t).\n2. Toner c·∫•p ·∫©m nh·∫π nh√†ng.\n3. Kem d∆∞·ª°ng ·∫©m m·ªèng nh·∫π.\n(B·ªè qua c√°c b∆∞·ªõc treatment n·∫∑ng ƒë√¥ h√¥m nay nh√©!)",
                options: [{ text: "ƒê√£ hi·ªÉu & S·∫Ω l√†m -> Checkpoint", nextState: "station2_Task" }]
            },

            // Nhi·ªám v·ª• chuy·ªÉn ti·∫øp Tr·∫°m 2
            station2_Task: {
                speaker: "CHECKPOINT 2",
                text: "‚ö†Ô∏è NHI·ªÜM V·ª§: H√£y th·ª±c hi·ªán (ho·∫∑c chu·∫©n b·ªã) cho ho·∫°t ƒë·ªông th∆∞ gi√£n n√†y ngay b√¢y gi·ªù nh√©.",
                options: [
                    { text: "C∆° th·ªÉ ƒë√£ s·∫µn s√†ng üßñ‚Äç‚ôÄÔ∏è -> Tr·∫°m cu·ªëi", nextState: "station3_Intro" }
                ]
            },

            // --- TR·∫†M 3: TINH TH·∫¶N ---
            station3_Intro: {
                speaker: "TR·∫†M 3: T√ÇM H·ªíN",
                text: "Cu·ªëi c√πng, h√£y ch·ªçn c√°ch gi·∫£i tr√≠ ƒë·ªÉ k·∫øt th√∫c m·ªôt ng√†y d√†i n√†o:",
                options: [
                    { text: "üé¨ Xem phim c√πng L√¢m (C∆°m ch√≥ time)", nextState: "st3_withLam", saveChoice: true },
                    { text: "üçø Xem phim m·ªôt m√¨nh (Me time)", nextState: "st3_alone", saveChoice: true },
                    { text: "üìö ƒê·ªçc truy·ªán tranh/Ti·ªÉu thuy·∫øt", nextState: "st3_read", saveChoice: true }
                ]
            },

            // Chi ti·∫øt Tr·∫°m 3
            st3_withLam: {
                speaker: "INFO: XEM C√ôNG L√ÇM",
                text: "<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> C√≥ g·ªëi √¥m 37 ƒë·ªô, ƒë∆∞·ª£c xoa b·ª•ng mi·ªÖn ph√≠ v√† c·∫£m gi√°c ƒë∆∞·ª£c che ch·ªü.\n\nL√¢m ƒëang ƒë·ª£i l·ªánh tri·ªáu t·∫≠p!",
                options: [{ text: "Tri·ªáu t·∫≠p L√¢m ngay! -> T·ªïng k·∫øt", nextState: "finish" }]
            },
            st3_alone: {
                speaker: "INFO: ME TIME",
                text: "<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> T·ª± do kh√≥c c∆∞·ªùi, kh√¥ng ai l√†m phi·ªÅn, s·∫°c l·∫°i nƒÉng l∆∞·ª£ng h∆∞·ªõng n·ªôi.\n\nH√£y ch·ªçn b·ªô phim y√™u th√≠ch nh·∫•t c·ªßa b·∫°n nh√©.",
                options: [{ text: "B·∫≠t Netflix l√™n! -> T·ªïng k·∫øt", nextState: "finish" }]
            },
            st3_read: {
                speaker: "INFO: ƒê·ªåC TRUY·ªÜN",
                text: "<span class='benefit-text'>‚òÖ L·ª¢I √çCH:</span> R·ªùi xa √°nh s√°ng xanh ƒëi·ªán tho·∫°i, gi√∫p m·∫Øt ƒë·ª° m·ªèi v√† d·ªÖ ƒëi v√†o gi·∫•c ng·ªß h∆°n.\n\nCu·ªôn m√¨nh trong chƒÉn v√† ƒë·ªçc th√¥i.",
                options: [{ text: "L·∫•y s√°ch ra th√¥i -> T·ªïng k·∫øt", nextState: "finish" }]
            },

            // --- K·∫æT TH√öC ---
            finish: {
                speaker: "H·ªÜ TH·ªêNG",
                text: "MISSION COMPLETED!\nƒê∆°n h√†ng 'ChƒÉm S√≥c C√¥ng Ch√∫a' ƒë√£ ƒë∆∞·ª£c ch·ªët ƒë∆°n.",
                isSummary: true,
                finalNote: "L√¢m nh·∫Øn: 'Anh bi·∫øt em m·ªát, ngh·ªâ ng∆°i ƒëi nh√©, m·ªçi vi·ªác c·ª© ƒë·ªÉ anh lo! ‚ù§Ô∏è'"
            }
        };

        // --- LOGIC GAME (GI·ªÆ NGUY√äN) ---
        let currentState = "welcome";
        let userChoices = [];

        const speakerEl = document.getElementById("speaker-name");
        const dialogueTextEl = document.getElementById("dialogue-text");
        const optionsContainerEl = document.getElementById("options-container");

        function renderState(stateKey) {
            const data = storyData[stateKey];
            
            speakerEl.textContent = data.speaker + ":";
            dialogueTextEl.innerHTML = data.text.replace(/\n/g, "<br>"); // Convert xu·ªëng d√≤ng

            optionsContainerEl.innerHTML = "";

            if (data.isSummary) {
                let summaryHtml = "<br><br>--- MENU C·ª¶A B·∫†N ---<br>";
                userChoices.forEach((choice, index) => {
                    summaryHtml += `‚ñ∂ ${choice}<br>`;
                });
                summaryHtml += `<br><span style="color: #ff69b4;">${data.finalNote}</span>`;
                dialogueTextEl.innerHTML += summaryHtml;
                return;
            }

            data.options.forEach(option => {
                const btn = document.createElement("button");
                btn.className = "pixel-btn";
                btn.textContent = option.text;
                
                btn.onclick = () => {
                    if (option.saveChoice) {
                        // L·∫•y text thu·∫ßn t√∫y ƒë·ªÉ l∆∞u v√†o menu (b·ªè icon)
                        let cleanText = option.text; 
                        userChoices.push(cleanText);
                    }
                    currentState = option.nextState;
                    renderState(currentState);
                };
                
                optionsContainerEl.appendChild(btn);
            });
        }

        renderState(currentState);

    </script>
</body>
</html>
